 <!DOCTYPE html>

<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->

<head>
  <meta charset="utf-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PySchedCL’s documentation! &mdash; PySchedCL 1.0 documentation</title>

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />




  <link rel="top" title="PySchedCL 1.0 documentation" href="#" />
  <link rel="next" title="pyschedcl package" href="pyschedcl.html" />

  <link rel="author" title="About these documents" href="#" />
  <link rel="index" title="Index" href="genindex.html" />
  <link rel="search" title="Search" href="search.html" />
  <link rel="top" title="PySchedCL documentation" href="index.html" />
  <link rel="next" title="Installation" href="install.html" />
  <link rel="prev" title="PySchedCL Environment" href="index.html" />


  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">

          <a href="#" class="icon icon-home"> PySchedCL



          </a>




          <div class="version">
            1.0
          </div>




          <div role="search">
            <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
              <input type="text" name="q" placeholder="Search docs" />
              <input type="hidden" name="check_keywords" value="yes" />
              <input type="hidden" name="area" value="default" />
            </form>
          </div>
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          <ul>
            <li class="toctree-l1"><a class="reference internal" href="home.html">Home</a></li>
            <li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
            <li class="toctree-l1"><a class="reference internal" href="pyschedcl.html">API Documentation</a></li>
            <li class="toctree-l1 current"><a class="reference internal" href="json_tutorial.html">Kernel Specification File</a></li>
            <li class="toctree-l1"><a class="current reference internal" href="partitioning.html">Partitioning</a></li>
            <li class="toctree-l1"><a class="reference internal" href="scheduling.html">Scheduling</a></li>
            <li class="toctree-l1"><a class="internal" href="utilities.html">Utilities</a></li>
            <li class="toctree-l1"><a class="reference internal" href="commands.html">Commands</a></li>
            <!-- <li class="toctree-l1"><a class="reference internal" href="releasenotes.html">Release notes</a></li> -->
            <li class="toctree-l1"><a class="reference internal" href="contact.html">Contact</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">


      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="#">PySchedCL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">

          <div role="navigation" aria-label="breadcrumbs navigation">
            <ul class="wy-breadcrumbs">
              <li><a href="#">Docs</a> &raquo;</li>

              <li>PySchedCL&#8217;s documentation!</li>
              <li class="wy-breadcrumbs-aside">

                <div class=asetop>
                    <a href=../index_hpc.php> HPC </a>
                    |
                  <a href=genindex.html>index</a> | <a href=pyschedcl.html>modules</a> | <a href="https://github.com/anighose25/pyschedcl">github</a> | <a href=_modules/pyschedcl/pyschedcl.html> source</a>
                </div>
              </li>
            </ul>
            <hr/>
          </div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div itemprop="articleBody">

              <div class="section" id="pyschedcl-home">
                <h1>Kernel Specification File <a class="headerlink" href="#pyschedcl-home" title="Permalink to this headline">¶</a></h1>
                <div class="toctree-wrapper compound">
                  <ul>
                    PySchedCL leverages a specification file (JSON format) for individual OpenCL kernels for carrying out host side management for the computation. The specification file contains parameters required
                    by the framework for dispatching a kernel to available OpenCL devices in the heterogeneous platform. These parameters typically comprise information regarding
                    global work size for the problem, information regarding size and type of buffers and variable arguments for the kernel. A detailed description of each parameter is tabulated below.


                  </ul>


                  <h3> Kernel Specification File Parameters:</h3>
                  <table border="1" class="docutils">
                    <colgroup>
                      <col width="20%" />
                      <col width="20%" />
                    </colgroup>
                    <thead valign="bottom">
                      <tr class="row-odd">
                        <th class="head">Attribute</th>
                        <th class="head">Type</th>
                        <th class="head">Description</th>
                      </tr>
                    </thead>
                    <tbody valign="top">
                      <tr class="row-even">
                        <td>name</td>
                        <td>String</td>
                        <td>Name of OpenCL Kernel.</td>
                      </tr>
                      <tr class="row-odd">
                        <td>src</td>
                        <td>String</td>
                        <td>Path to the source of the OpenCL Kernel file.</td>
                      </tr>
                      <tr class="row-even">
                        <td>workDimension</td>
                        <td>Integer</td>
                        <td>Number of dimensions  of the computational kernel.</td>
                      </tr>
                      <tr class="row-odd">
                        <td>partition</td>
                        <td>Integer</td>
                        <td>An integer in range [0..10] which describes how to partition the kernel between CPU and GPU. </td>
                      </tr>
                      <tr class="row-even">
                        <td>globalWorkSize</td>
                        <td>String</td>
                        <td>A python list expression denoting the Global Work Size Dimensions of the Kernel.</td>
                      </tr>
                      <tr class="row-odd">
                        <td> inputBuffers</td>
                        <td>List</td>
                        <td>A list of dictionaries containing information of read-only buffers. These will be the arguments with global modifier and whose values are not modified in the kernel.</td>
                      </tr>
                      <tr class="row-even">
                        <td> ioBuffers</td>
                        <td>List</td>
                        <td>A list of dictionaries containing information of read-write buffers. These will be the arguments with global modifier and whose values are not modified in the kernel. </td>
                      </tr>
                      <tr class="row-odd">
                        <td>outputBuffers</td>
                        <td>List</td>
                        <td>A list of dictionaries containing information of write-only buffers. These will be the arguments with global modifier and whose values are not modified in the kernel.</td>
                      </tr>
                      <tr class="row-even">
                        <td>varArguments</td>
                        <td>List</td>
                        <td>A list of dictionaries containing information regarding variable arguments passed to the kernel.</td>
                      </tr>
                      <tr class="row-odd">
                        <td> localArguments</td>
                        <td>List</td>
                        <td>A list of dictionaries containing information regarding local arguments passed to the kernel. These will be the arguments with local modifier.</td>
                      </tr>
                      <tr class="row-even">
                        <td>id</td>
                        <td>String</td>
                        <td>This is the string which should be able to uniquely identify the kernel among the set of kernels. This is an optional field.</td>
                      </tr>

                    </tbody>
                  </table>
                  <h3> An Illustrative Example</h3>
                  Let us consider the standard vector addition kernel from the CUDA SDK below.
                  <!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 9
 8
10
11
12
13
14
15</pre></td><td><pre style="margin: 0; line-height: 125%"> <span style="color: #888888">// OpenCL Kernel Function for element by element vector addition</span>
__kernel <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">VectorAdd</span>(__global <span style="color: #008800; font-weight: bold">const</span> <span style="color: #333399; font-weight: bold">float</span><span style="color: #333333">*</span> a, __global <span style="color: #008800; font-weight: bold">const</span> <span style="color: #333399; font-weight: bold">float</span><span style="color: #333333">*</span> b, __global <span style="color: #333399; font-weight: bold">float</span><span style="color: #333333">*</span> c, <span style="color: #333399; font-weight: bold">int</span> iNumElements)
{
    <span style="color: #888888">// get index into global data array</span>
    <span style="color: #333399; font-weight: bold">int</span> iGID <span style="color: #333333">=</span> get_global_id(<span style="color: #0000DD; font-weight: bold">0</span>);

    <span style="color: #888888">// bound check (equivalent to the limit on a &#39;for&#39; loop for standard/serial C code</span>
    <span style="color: #008800; font-weight: bold">if</span> (iGID <span style="color: #333333">&gt;=</span> iNumElements)
    {
        <span style="color: #008800; font-weight: bold">return</span>;
    }

    <span style="color: #888888">// add the vector elements</span>
    c[iGID] <span style="color: #333333">=</span> a[iGID] <span style="color: #333333">+</span> b[iGID];
}
</pre></td></tr></table></div>
<p> As evident from the above code, the kernel requires two input buffers, one output buffer and one variable denoting the total size of the arrays to be processed. The kernel performs an element-wise addition of numbers in both the input buffers and stores the result in an output buffer.
 The corresponding specification file is given below.
<!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37</pre></td><td><pre style="margin: 0; line-height: 125%">{

    <span style="color: #000080; font-weight: bold">&quot;globalWorkSize&quot;</span>: <span style="color: #0000FF">&quot;[dataset]&quot;</span>,
    <span style="color: #000080; font-weight: bold">&quot;inputBuffers&quot;</span>: [
        {
            <span style="color: #000080; font-weight: bold">&quot;break&quot;</span>: <span style="color: #0000FF">1</span>,
            <span style="color: #000080; font-weight: bold">&quot;pos&quot;</span>: <span style="color: #0000FF">0</span>,
            <span style="color: #000080; font-weight: bold">&quot;size&quot;</span>: <span style="color: #0000FF">&quot;dataset&quot;</span>,
            <span style="color: #000080; font-weight: bold">&quot;type&quot;</span>: <span style="color: #0000FF">&quot;float&quot;</span>
        },
        {
            <span style="color: #000080; font-weight: bold">&quot;break&quot;</span>: <span style="color: #0000FF">1</span>,
            <span style="color: #000080; font-weight: bold">&quot;pos&quot;</span>: <span style="color: #0000FF">1</span>,
            <span style="color: #000080; font-weight: bold">&quot;size&quot;</span>: <span style="color: #0000FF">&quot;dataset&quot;</span>,
            <span style="color: #000080; font-weight: bold">&quot;type&quot;</span>: <span style="color: #0000FF">&quot;float&quot;</span>
        }
    ],
    <span style="color: #000080; font-weight: bold">&quot;name&quot;</span>: <span style="color: #0000FF">&quot;VectorAdd&quot;</span>,
    <span style="color: #000080; font-weight: bold">&quot;outputBuffers&quot;</span>: [
        {
            <span style="color: #000080; font-weight: bold">&quot;break&quot;</span>: <span style="color: #0000FF">1</span>,
            <span style="color: #000080; font-weight: bold">&quot;pos&quot;</span>: <span style="color: #0000FF">2</span>,
            <span style="color: #000080; font-weight: bold">&quot;size&quot;</span>: <span style="color: #0000FF">&quot;dataset&quot;</span>,
            <span style="color: #000080; font-weight: bold">&quot;type&quot;</span>: <span style="color: #0000FF">&quot;float&quot;</span>
        }
    ],
    <span style="color: #000080; font-weight: bold">&quot;partition&quot;</span>: <span style="color: #0000FF">10</span>,
    <span style="color: #000080; font-weight: bold">&quot;src&quot;</span>: <span style="color: #0000FF">&quot;VectorAdd.cl&quot;</span>,
    <span style="color: #000080; font-weight: bold">&quot;varArguments&quot;</span>: [
        {
            <span style="color: #000080; font-weight: bold">&quot;pos&quot;</span>: <span style="color: #0000FF">3</span>,
            <span style="color: #000080; font-weight: bold">&quot;type&quot;</span>: <span style="color: #0000FF">&quot;int&quot;</span>,
            <span style="color: #000080; font-weight: bold">&quot;value&quot;</span>: <span style="color: #0000FF">&quot;partition_round(dataset, size_percent)&quot;</span>
        }
    ],
    <span style="color: #000080; font-weight: bold">&quot;workDimension&quot;</span>: <span style="color: #0000FF">1</span>
}
</pre></td></tr></table></div>
<p> The primary reason behind introducing the JSON Specification file is to relieve the end user from designing large complex host side programs and focus more on the algorithm of the application at hand.
The specification file shall provide  a list of guidance parameters for the framework so that it can carry out the computation of the given kernel.
<div class="section" id="json_details">
<p> The guidance parameters can be classified into three primary categories.
  <ul>
<li> <b>Source Information:</b>
  <p>These parameters typically represent kernel source file information and associated problem size for the computation. This includes the name of the OpenCL kernel function (<font style="color: #000080; font-weight: bold">name</font>), the name of the kernel source file (<font style="color: #000080; font-weight: bold">src</font>)
, the dimension of the kernel (<font style="color: #000080; font-weight: bold">workDimension</font>) and the total number of workitems for each dimension (<font style="color: #000080; font-weight: bold">globalWorkSize</font>)  </li>
<li> <b>Buffer Information: </b>
  <p>These parameters represent information for every input (<font style="color: #000080; font-weight: bold">inputBuffers</font>) and output (<font style="color: #000080; font-weight: bold">outputBuffers</font>) buffer for the program.
  It may be observed from the above specification file, each buffer is characterized by a tuple < <font style="color: #000080; font-weight: bold">break</font>, <font style="color: #000080; font-weight: bold">pos</font>, <font style="color: #000080; font-weight: bold">size</font>, <font style="color: #000080; font-weight: bold">type</font></b>>.<br/>
  The <font style="color: #000080; font-weight: bold">break</font> flag indicates whether the buffer is partitionable or not. This is required by the framework to understand whether buffers should be broken while distributing the computation across multiple devices in the target platform.<br/> The value of <font style="color: #000080; font-weight: bold">pos</font> denotes the positional argument for that buffer in the actual kernel function. This is needed while setting up the kernel arguments for the OpenCL runtime system by the framework.<br/> The <font style="color: #000080; font-weight: bold">size</font> and <font style="color: #000080; font-weight: bold">type</font> variables denote the size (number of elements) and type of the buffer respectively. Here the size of the buffer and the global work size for the kernel are the same and are represented by a symbolic expression called <font style="color: #0000FF">dataset</font> which may be changed during runtime.
<li> <b>Argument Information:
<p></b> These parameters represent information for every variable argument (<font style="color: #000080; font-weight: bold">varArguments</font>) for the OpenCL kernel. Each variable argument is characterized by a tuple < <font style="color: #000080; font-weight: bold">pos</font>,  <font style="color: #000080; font-weight: bold">type</font>, <font style="color: #000080; font-weight: bold">value</font></b>>.
<br/>The value of pos like before denotes the positional argument of that variable in the actual kernel function. <br/>The <font style="color: #000080; font-weight: bold">varArguments</font> field denotes the data type of the variable. <br/>The <font style="color: #000080; font-weight: bold">value</font> field represents the corresponding value of the variable, which may be
a constant or a symbolic expression. The variable kernel argument for the given function represents the total number of elements for each buffer and therefore should have been set to <font style="color: #0000FF">dataset</font>. <br/>However, we emphasize that this is a partition sensitive parameter and is therefore represented by <font style="color: #000080; font-weight: bold">partition_round(dataset,size_percent)</font>.  The corresponding function is a pyschedcl internal function used while partitioning applications. The user has the freedom to add custom functions of their own for the same. </li>
  </ul>
</div>
                </div>
              </div>

            </div>
          </div>
          <footer>

            <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">

              <a href="partitioning.html" class="btn btn-neutral float-right" title="pyschedcl package" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>


            </div>


            <hr/>

            <div role="contentinfo">
              <p>
                &copy; Copyright 2017, Anirban Ghose, Lokesh Dokara, Srijeeta Maity.

              </p>
            </div>
            Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

          </footer>

        </div>
      </div>

    </section>

  </div>





  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT: './',
      VERSION: '1.0',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      HAS_SOURCE: true
    };
  </script>
  <script type="text/javascript" src="_static/jquery.js"></script>
  <script type="text/javascript" src="_static/underscore.js"></script>
  <script type="text/javascript" src="_static/doctools.js"></script>
  <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>





  <script type="text/javascript" src="_static/js/theme.js"></script>




  <script type="text/javascript">
    jQuery(function() {
      SphinxRtdTheme.StickyNav.enable();
    });
  </script>


</body>

</html>
